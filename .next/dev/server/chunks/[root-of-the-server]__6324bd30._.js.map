{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///home/avhan3/Dokumen/PROGRAM/CANVA/KumpulLink/lib/db.js"],"sourcesContent":["// lib/db.js\nimport sqlite3 from 'sqlite3';\nimport { open } from 'sqlite';\n\n// Open the database\nexport default async function initDB() {\n  const db = await open({\n    filename: 'kumpullink.db',\n    driver: sqlite3.Database\n  });\n\n  // Create tables if they don't exist\n  await db.exec(`\n    CREATE TABLE IF NOT EXISTS links (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      backend_id TEXT UNIQUE NOT NULL,\n      title TEXT NOT NULL,\n      link_label TEXT NOT NULL,\n      link_url TEXT NOT NULL,\n      icon_image TEXT,\n      click_count INTEGER DEFAULT 0,\n      created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n    );\n\n    CREATE TABLE IF NOT EXISTS ad_settings (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      zone_name TEXT,\n      zone_id TEXT,\n      ad_code TEXT,\n      enabled BOOLEAN DEFAULT 0\n    );\n\n    CREATE TABLE IF NOT EXISTS admin (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      password TEXT NOT NULL,\n      created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n      updated_at DATETIME DEFAULT CURRENT_TIMESTAMP\n    );\n  `);\n\n  // Check if admin user exists, if not create default password 'admin123'\n  const admin = await db.get('SELECT id FROM admin LIMIT 1');\n  if (!admin) {\n    await db.run('INSERT INTO admin (password) VALUES (?)', ['admin123']);\n  }\n\n  return db;\n}"],"names":[],"mappings":"AAAA,YAAY;;;;;AACZ;AACA;;;AAGe,eAAe;IAC5B,MAAM,KAAK,MAAM,IAAA,mKAAI,EAAC;QACpB,UAAU;QACV,QAAQ,kHAAO,CAAC,QAAQ;IAC1B;IAEA,oCAAoC;IACpC,MAAM,GAAG,IAAI,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;EA0Bf,CAAC;IAED,wEAAwE;IACxE,MAAM,QAAQ,MAAM,GAAG,GAAG,CAAC;IAC3B,IAAI,CAAC,OAAO;QACV,MAAM,GAAG,GAAG,CAAC,2CAA2C;YAAC;SAAW;IACtE;IAEA,OAAO;AACT"}},
    {"offset": {"line": 119, "column": 0}, "map": {"version":3,"sources":["file:///home/avhan3/Dokumen/PROGRAM/CANVA/KumpulLink/app/api/ad-settings/route.js"],"sourcesContent":["// app/api/ad-settings/route.js\nimport { NextResponse } from 'next/server';\nimport initDB from '@/lib/db';\n\nexport async function GET() {\n  try {\n    const db = await initDB();\n    // Get the first (and typically only) ad settings record\n    const settings = await db.get('SELECT * FROM ad_settings LIMIT 1');\n\n    // If no settings exist, return default\n    if (!settings) {\n      return NextResponse.json({\n        id: null,\n        zone_name: '',\n        zone_id: '',\n        ad_code: '',\n        enabled: 0\n      });\n    }\n\n    return NextResponse.json(settings);\n  } catch (error) {\n    return NextResponse.json({ error: error.message }, { status: 500 });\n  }\n}\n\nexport async function POST(request) {\n  try {\n    const { zone_name, zone_id, ad_code, enabled } = await request.json();\n\n    const db = await initDB();\n    // First, check if settings already exist\n    const existing = await db.get('SELECT id FROM ad_settings LIMIT 1');\n\n    if (existing) {\n      // Update existing settings\n      await db.run(`\n        UPDATE ad_settings\n        SET zone_name = ?, zone_id = ?, ad_code = ?, enabled = ?\n        WHERE id = ?\n      `, [zone_name, zone_id, ad_code, enabled ? 1 : 0, existing.id]);\n\n      const updatedSettings = await db.get('SELECT * FROM ad_settings WHERE id = ?', [existing.id]);\n      return NextResponse.json(updatedSettings);\n    } else {\n      // Insert new settings\n      await db.run(`\n        INSERT INTO ad_settings (zone_name, zone_id, ad_code, enabled)\n        VALUES (?, ?, ?, ?)\n      `, [zone_name, zone_id, ad_code, enabled ? 1 : 0]);\n\n      const newSettings = await db.get('SELECT * FROM ad_settings ORDER BY id DESC LIMIT 1');\n      return NextResponse.json(newSettings);\n    }\n  } catch (error) {\n    return NextResponse.json({ error: error.message }, { status: 500 });\n  }\n}"],"names":[],"mappings":"AAAA,+BAA+B;;;;;;;AAC/B;AACA;;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,KAAK,MAAM,IAAA,sHAAM;QACvB,wDAAwD;QACxD,MAAM,WAAW,MAAM,GAAG,GAAG,CAAC;QAE9B,uCAAuC;QACvC,IAAI,CAAC,UAAU;YACb,OAAO,gJAAY,CAAC,IAAI,CAAC;gBACvB,IAAI;gBACJ,WAAW;gBACX,SAAS;gBACT,SAAS;gBACT,SAAS;YACX;QACF;QAEA,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,MAAM,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IACnE;AACF;AAEO,eAAe,KAAK,OAAO;IAChC,IAAI;QACF,MAAM,EAAE,SAAS,EAAE,OAAO,EAAE,OAAO,EAAE,OAAO,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEnE,MAAM,KAAK,MAAM,IAAA,sHAAM;QACvB,yCAAyC;QACzC,MAAM,WAAW,MAAM,GAAG,GAAG,CAAC;QAE9B,IAAI,UAAU;YACZ,2BAA2B;YAC3B,MAAM,GAAG,GAAG,CAAC,CAAC;;;;MAId,CAAC,EAAE;gBAAC;gBAAW;gBAAS;gBAAS,UAAU,IAAI;gBAAG,SAAS,EAAE;aAAC;YAE9D,MAAM,kBAAkB,MAAM,GAAG,GAAG,CAAC,0CAA0C;gBAAC,SAAS,EAAE;aAAC;YAC5F,OAAO,gJAAY,CAAC,IAAI,CAAC;QAC3B,OAAO;YACL,sBAAsB;YACtB,MAAM,GAAG,GAAG,CAAC,CAAC;;;MAGd,CAAC,EAAE;gBAAC;gBAAW;gBAAS;gBAAS,UAAU,IAAI;aAAE;YAEjD,MAAM,cAAc,MAAM,GAAG,GAAG,CAAC;YACjC,OAAO,gJAAY,CAAC,IAAI,CAAC;QAC3B;IACF,EAAE,OAAO,OAAO;QACd,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,MAAM,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IACnE;AACF"}}]
}