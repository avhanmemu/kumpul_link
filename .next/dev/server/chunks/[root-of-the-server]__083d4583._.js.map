{
  "version": 3,
  "sources": [],
  "sections": [
    {"offset": {"line": 64, "column": 0}, "map": {"version":3,"sources":["file:///home/avhan3/Dokumen/PROGRAM/CANVA/KumpulLink/lib/db.js"],"sourcesContent":["// lib/db.js\nimport sqlite3 from 'sqlite3';\nimport { open } from 'sqlite';\n\n// Open the database\nexport default async function initDB() {\n  const db = await open({\n    filename: 'kumpullink.db',\n    driver: sqlite3.Database\n  });\n\n  // Create tables if they don't exist\n  await db.exec(`\n    CREATE TABLE IF NOT EXISTS links (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      backend_id TEXT UNIQUE NOT NULL,\n      title TEXT NOT NULL,\n      link_label TEXT NOT NULL,\n      link_url TEXT NOT NULL,\n      icon_image TEXT,\n      click_count INTEGER DEFAULT 0,\n      created_at DATETIME DEFAULT CURRENT_TIMESTAMP\n    );\n\n    CREATE TABLE IF NOT EXISTS ad_settings (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      zone_name TEXT,\n      zone_id TEXT,\n      ad_code TEXT,\n      enabled BOOLEAN DEFAULT 0\n    );\n\n    CREATE TABLE IF NOT EXISTS admin (\n      id INTEGER PRIMARY KEY AUTOINCREMENT,\n      password TEXT NOT NULL,\n      created_at DATETIME DEFAULT CURRENT_TIMESTAMP,\n      updated_at DATETIME DEFAULT CURRENT_TIMESTAMP\n    );\n  `);\n\n  // Check if admin user exists, if not create default password 'admin123'\n  const admin = await db.get('SELECT id FROM admin LIMIT 1');\n  if (!admin) {\n    await db.run('INSERT INTO admin (password) VALUES (?)', ['admin123']);\n  }\n\n  return db;\n}"],"names":[],"mappings":"AAAA,YAAY;;;;;AACZ;AACA;;;AAGe,eAAe;IAC5B,MAAM,KAAK,MAAM,IAAA,mKAAI,EAAC;QACpB,UAAU;QACV,QAAQ,kHAAO,CAAC,QAAQ;IAC1B;IAEA,oCAAoC;IACpC,MAAM,GAAG,IAAI,CAAC,CAAC;;;;;;;;;;;;;;;;;;;;;;;;;;EA0Bf,CAAC;IAED,wEAAwE;IACxE,MAAM,QAAQ,MAAM,GAAG,GAAG,CAAC;IAC3B,IAAI,CAAC,OAAO;QACV,MAAM,GAAG,GAAG,CAAC,2CAA2C;YAAC;SAAW;IACtE;IAEA,OAAO;AACT"}},
    {"offset": {"line": 119, "column": 0}, "map": {"version":3,"sources":["file:///home/avhan3/Dokumen/PROGRAM/CANVA/KumpulLink/app/api/links/route.js"],"sourcesContent":["// app/api/links/route.js\nimport { NextResponse } from 'next/server';\nimport initDB from '@/lib/db';\n\nexport async function GET() {\n  try {\n    const db = await initDB();\n    const links = await db.all('SELECT * FROM links ORDER BY created_at DESC');\n    return NextResponse.json(links);\n  } catch (error) {\n    return NextResponse.json({ error: error.message }, { status: 500 });\n  }\n}\n\nexport async function POST(request) {\n  try {\n    const { title, link_label, link_url, icon_image } = await request.json();\n\n    const backend_id = Date.now().toString() + Math.random().toString(36).substr(2, 9);\n\n    const db = await initDB();\n    await db.run(\n      'INSERT INTO links (backend_id, title, link_label, link_url, icon_image, click_count) VALUES (?, ?, ?, ?, ?, ?)',\n      [backend_id, title, link_label, link_url, icon_image, 0]\n    );\n\n    const newLink = await db.get('SELECT * FROM links WHERE backend_id = ?', [backend_id]);\n    return NextResponse.json(newLink);\n  } catch (error) {\n    return NextResponse.json({ error: error.message }, { status: 500 });\n  }\n}"],"names":[],"mappings":"AAAA,yBAAyB;;;;;;;AACzB;AACA;;;AAEO,eAAe;IACpB,IAAI;QACF,MAAM,KAAK,MAAM,IAAA,sHAAM;QACvB,MAAM,QAAQ,MAAM,GAAG,GAAG,CAAC;QAC3B,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,MAAM,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IACnE;AACF;AAEO,eAAe,KAAK,OAAO;IAChC,IAAI;QACF,MAAM,EAAE,KAAK,EAAE,UAAU,EAAE,QAAQ,EAAE,UAAU,EAAE,GAAG,MAAM,QAAQ,IAAI;QAEtE,MAAM,aAAa,KAAK,GAAG,GAAG,QAAQ,KAAK,KAAK,MAAM,GAAG,QAAQ,CAAC,IAAI,MAAM,CAAC,GAAG;QAEhF,MAAM,KAAK,MAAM,IAAA,sHAAM;QACvB,MAAM,GAAG,GAAG,CACV,kHACA;YAAC;YAAY;YAAO;YAAY;YAAU;YAAY;SAAE;QAG1D,MAAM,UAAU,MAAM,GAAG,GAAG,CAAC,4CAA4C;YAAC;SAAW;QACrF,OAAO,gJAAY,CAAC,IAAI,CAAC;IAC3B,EAAE,OAAO,OAAO;QACd,OAAO,gJAAY,CAAC,IAAI,CAAC;YAAE,OAAO,MAAM,OAAO;QAAC,GAAG;YAAE,QAAQ;QAAI;IACnE;AACF"}}]
}